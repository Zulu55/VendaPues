@page "/changePassword"

@if (loading)
{
    <Loading />
}
else
{
    <MudContainer MaxWidth="MaxWidth.Medium">
        <MudPaper Elevation="4" Class="pa-4">
            <MudText Typo="Typo.h5" Class="mb-4">Cambio de Contraseña</MudText>
            <EditForm Model="changePasswordDTO">
                <DataAnnotationsValidator />
                <MudGrid Spacing="3">
                    <MudItem xs="12">
                        <MudCard>
                            <MudCardContent>
                                <MudTextField Label="Contraseña actual:"
                                              InputType="InputType.Password"
                                              @bind-Value="@changePasswordDTO.CurrentPassword" />
                                <ValidationMessage For="@(() => changePasswordDTO.CurrentPassword)" />
                            </MudCardContent>
                        </MudCard>
                    </MudItem>
                    <MudItem xs="12">
                        <MudCard>
                            <MudCardContent>
                                <MudTextField Label="Nueva contraseña:"
                                              InputType="InputType.Password"
                                              @bind-Value="@changePasswordDTO.NewPassword" />
                                <ValidationMessage For="@(() => changePasswordDTO.NewPassword)" />
                            </MudCardContent>
                        </MudCard>
                    </MudItem>
                    <MudItem xs="12">
                        <MudCard>
                            <MudCardContent>
                                <MudTextField Label="Confirmación de nueva contraseña:"
                                              InputType="InputType.Password"
                                              @bind-Value="@changePasswordDTO.Confirm" />
                                <ValidationMessage For="@(() => changePasswordDTO.Confirm)" />
                            </MudCardContent>
                        </MudCard>
                    </MudItem>
                </MudGrid>
                <MudGrid Justify="Justify.Center" Class="mt-4">
                    <MudItem>
                        <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Check" Color="Color.Primary" OnClick="ChangePasswordAsync">
                            Guardar Cambios
                        </MudButton>
                    </MudItem>
                    <MudItem>
                        <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowBack" Color="Color.Secondary" OnClick="ReturnAction">
                            Regresar
                        </MudButton>
                    </MudItem>
                </MudGrid>
            </EditForm>
        </MudPaper>
    </MudContainer>
}